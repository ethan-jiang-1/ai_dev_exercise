# NovaBrain 3.0 产品需求文档 (片段) - 多模态数据融合 (医疗影像与文本) v0.1

*   **功能模块**: 数据处理与特征工程
*   **特性**: 多模态数据融合 (Multi-Modal Data Fusion) - **医疗场景试点**
*   **版本**: PRD v1.2 (片段)
*   **状态**: 草稿
*   **日期**: 2023-04-10
*   **作者**: 钱工 (产品经理)
*   **相关史诗**: [EPIC-015] 支持处理和融合多种数据模态

## 1. 背景与目标

**背景**: 现代 AI 应用越来越需要处理和理解来自不同来源和类型的数据，例如结合图像、文本、表格数据进行分析。**简单来说，当前的 NovaBrain v2.x 就像一个只能阅读一种语言（比如只懂文本或只懂表格）的工具。这在很多真实场景中是个问题，因为要真正理解情况，我们常常需要结合不同类型的信息。**

**例如：**
*   在**金融风控**中，只看交易数据（表格）可能无法发现巧妙的欺诈，但如果能同时分析用户的文字投诉或说明（文本），风险就可能更明显。
*   在**医疗领域**，只看医疗影像（图片）可能不够，结合医生写的诊断报告（文本）能提供更全面的信息。

**目前的系统无法让用户在一个分析流程中轻松地结合这些不同类型的数据，这限制了 NovaBrain 解决这些复杂问题的能力。**

**目标**: 
*   使 NovaBrain 3.0 平台具备处理至少三种核心数据模态（图像、文本、表格）的能力。
*   提供基础的数据融合机制，允许用户在 AI Pipeline 中**组合**来自不同模态的特征向量进行模型训练和推理。
*   为用户提供灵活配置不同模态数据预处理和特征提取方式的接口。
*   核心目标：**让用户能在一个流程中轻松结合图像、文本和表格数据，以获得更好的 AI 分析结果。**
*   提升平台在处理现实世界复杂、多源数据场景下的竞争力。

## 2. 用户故事

*   **作为一名医疗研究员**, 我希望能够上传病人的医疗影像（图像）和对应的诊断报告（文本），平台能够自动提取两种模态的关键特征，并允许我选择不同的融合策略来预测疾病风险。

## 3. 功能需求

**FR-MM-001: 多模态数据源接入 (医疗试点)**
*   平台应支持用户上传或连接至少包含以下类型数据的数据集：
    *   图像文件 (常见格式如 JPEG, PNG, **DICOM 可选考虑**)
    *   文本文件 (如 TXT, **从 CSV/JSON 中提取的报告列**)
*   Low-Code 界面应提供特定的数据输入节点，用于指定**图像和文本**模态数据的来源和基本元数据。

**FR-MM-002: 模态特定的预处理与特征提取 (医疗试点)**
*   平台应为支持的**图像与文本**模态提供默认的、可配置的预处理和特征提取组件：
    *   **图像**: 提供基础调整选项（如大小调整、归一化）和特征提取能力，利用**常见的预训练 CNN 模型**（如 ResNet 类模型）将图像转换为数值特征向量 (embedding)。
    *   **文本**: 提供基础文本清理选项（**如医学术语相关的停用词处理可选**）和特征提取能力，使用**标准的向量化技术**（如 Word2Vec/GloVe 类）或**常见的预训练 Transformer 模型**（如 BERT 类模型，**BioBERT/ClinicalBERT 可选考虑**）将文本转换为数值特征向量 (embedding)。
*   允许用户选择不同的特征提取方法或配置相关参数。
*   Low-Code 界面应清晰展示**图像与文本**数据的处理流程。

**FR-MM-003: 特征融合机制 (医疗试点)**
*   平台应提供至少两种基础的特征融合策略节点，接收 **FR-MM-002 输出的图像特征向量和文本特征向量**作为输入:
    *   **拼接 (Concatenation)**: 将来自**图像和文本**模态的特征向量直接按顺序连接成一个更长的向量。
    *   **简单加权平均 (Weighted Average)**: 对来自**图像和文本**模态的特征向量进行加权求和。**(注意：此方法通常要求输入向量具有相同维度，或通过节点内建/用户配置的映射层进行处理)**。权重应可配置。
*   融合节点应能接收来自**图像和文本**特征提取节点的输出。
*   融合后产生的单一特征向量应能作为下游模型训练/推理节点的输入。

**FR-MM-004: Low-Code 界面支持 (医疗试点)**
*   可视化建模界面需要新增对应的数据输入 (**图像、文本**)、预处理、特征提取和特征融合组件节点。
*   节点配置界面应允许用户选择模态类型 (**图像/文本**)、配置处理参数（如选择预训练模型、设置权重等）。
*   界面应能清晰展示**图像与文本**多模态数据的流转路径。

## 4. 非功能需求

*   **NFR-MM-001 (性能)**: 对于一个**小型代表性医疗数据集**（例如：包含 100 个样本，每个样本含**医疗影像和对应诊断报告文本**），端到端的特征提取和融合（使用默认配置）应在**指定基准环境下的 5 分钟内**完成。
*   **NFR-MM-002 (可扩展性)**: **图像与文本**的处理和特征提取实现应遵循**统一的模块化设计模式**，为未来添加新模态（如**基因组数据、其他医疗传感器数据**）及其处理组件提供清晰的扩展点。
*   **NFR-MM-03 (易用性)**: 用户应能通过 Low-Code 界面直观地构建和理解**医疗影像与文本**多模态数据处理流程，无需编写复杂代码。 (v0.1 阶段重点关注后端逻辑实现和 API 定义，UI 可用基础组件或 MOCK 替代)。

## 5. 假设与依赖

*   假设平台已有基础的数据存储和计算资源调度能力。
*   依赖模型仓库提供所需的预训练模型（**医疗领域相关 CNN, 文本 Transformer 等可选**）。
*   依赖底层的任务执行引擎来运行数据处理和特征提取任务。

## 6. 未来考虑 (v0.2 及以后)

*   更高级的融合策略（如注意力机制融合、多模态 Transformer）。
*   支持端到端的多模态模型训练。
*   自动化的模态选择和融合策略推荐。
*   模态缺失情况下的处理机制。

## 7. 验收标准

*   能够成功创建一个包含**图像和文本**数据输入的 Pipeline。
*   能够为**图像和文本**模态选择至少一种预处理/特征提取方法。
*   能够使用拼接或加权平均方法融合**图像和文本**特征。
*   融合后的特征能够成功输入给一个简单的下游模型（如逻辑回归）进行训练。
*   相关 Low-Code 节点可用且配置项符合需求 (**针对图像和文本**)。
*   （性能、扩展性、易用性需结合测试结果评估） 