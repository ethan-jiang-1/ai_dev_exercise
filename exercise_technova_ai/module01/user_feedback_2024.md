# NovaBrain 用户体验反馈 & 生存指南 (非官方版)

*整理：NovaBrain 深度用户 & 社区志愿者*
*更新时间：2024年3月*

**前言**：NovaBrain 是个强大的 AI 平台，但说实话，刚上手时确实会遇到不少"坑"。这份非官方指南，汇集了社区里用户的真实反馈、踩坑经验和一些"野路子"技巧，希望能帮助新老用户更好地驾驭这个平台，少走弯路，从"崩溃"走向"真香"。

## Part 1: 新手村任务 - 部署与环境配置

**常见吐槽点**：
*   "官方文档说'简单三步'，我卡在第二步'环境依赖检查'卡了三天！" - 某高校李教授
*   "为啥我的 K8s 集群死活连不上 NovaBrain 的控制台？防火墙和安全组都确认没问题啊！" - 一位抓狂的运维小哥
*   "跟着 Quick Start 跑第一个示例，直接 OOM 了… 我的 GPU 是 3090，不至于吧？" - 一名 AI 研究生

**生存技巧 & 经验分享**：
1.  **环境依赖是魔鬼**：官方文档有时更新不及时。部署前，强烈建议去官方 GitHub Repo 的 **Issue 区** 搜一下你的操作系统版本、K8s 版本、Docker 版本、Nvidia 驱动版本，看看有没有人遇到过类似兼容性问题。通常能找到解决方案或 Workaround。
2.  **网络问题排查大法**：除了防火墙和安全组，别忘了检查：
    *   K8s 内部的 Network Policy。
    *   控制台和 Agent 之间的 Service Discovery 是否正常 (DNS 解析、CoreDNS 配置)。
    *   集群内部 Pod 之间的网络连通性 (`ping`, `curl`)。
3.  **默认配置不一定适合你**：Quick Start 的示例可能用了比较吃资源的大模型或默认配置。对于资源有限的环境（如单卡 GPU），**务必**：
    *   检查并调小示例代码里的 `batch_size`。
    *   在 NovaBrain 部署配置里限制 Pod 的 CPU 和内存 `requests/limits`。
    *   选用更轻量级的模型做测试。
4.  **神秘错误码怎么办？**：遇到像 `Error 0x5F3759DF` 这种意义不明的错误码，除了 Google，还可以试试：
    *   在 NovaBrain 的 Pod 日志里找更详细的 Stack Trace。
    *   去官方论坛或 Slack 群提问，带上你的环境信息、操作步骤和完整日志。（提问的艺术很重要！）

## Part 2: 进阶副本 - 模型训练与性能调优

**常见吐槽点**：
*   "训练跑着跑着突然变慢了，GPU 利用率掉到底，啥情况？"
*   "模型在开发环境跑得好好的，一上平台精度就掉，玄学啊！"
*   "资源调度策略到底怎么配最优？文档写得云里雾里。"

**生存技巧 & 经验分享**：
1.  **训练变慢排查 checklist**: 
    *   **数据加载瓶颈**：是不是磁盘 I/O 或网络 I/O 跟不上了？检查数据预处理进程、网络带宽、存储性能。考虑使用 TFRecord、Petastorm 等格式优化数据加载。
    *   **CPU 瓶颈**：数据预处理、结果后处理等 CPU 密集型任务是不是拖慢了 GPU？用 `htop` 看看 CPU 使用率。
    *   **显存碎片化**：长时间训练也可能导致碎片化，尝试定期重启训练任务（配合 Checkpoint）。
2.  **环境一致性是关键**：开发环境和平台环境的差异（Python 库版本、CUDA/cuDNN 版本、甚至底层驱动）是导致精度问题的常见原因。务必：
    *   使用 Docker 固定你的训练环境。
    *   在平台上严格复现开发环境的依赖。
    *   关注随机种子（Random Seed）的设置。
3.  **资源调度策略经验谈**：
    *   **优先级**：核心业务（如实时推理）给最高优先级，探索性训练给最低优先级。
    *   **抢占**：如果资源紧张，允许高优先级抢占低优先级是必要的，但要配置好 Checkpoint 机制，避免低优先级任务白跑。
    *   **弹性伸缩**：适合负载波动大的场景，但要小心配置触发阈值和冷却时间，避免频繁伸缩带来的开销和不稳定。
    *   **没有银弹**：最优策略需要根据你的具体业务负载、资源情况、成本容忍度不断实验和调整。

## Part 3: 日常运维与监控

**常见吐槽点**：
*   "告警太多了，一堆无关紧要的通知，狼来了效应。"
*   "模型漂移了怎么快速发现？监控面板指标太多看不过来。"
*   "日志系统有时候查不到关键信息。"

**生存技巧 & 经验分享**：
1.  **告警降噪**：
    *   区分告警级别 (Critical, Warning, Info)。
    *   配置合理的阈值和触发条件（例如，连续 N 次超过阈值才告警）。
    *   使用告警抑制规则，避免关联告警轰炸。
    *   不同类型的告警发送到不同渠道（例如，严重告警发短信/电话，一般告警发邮件/钉钉）。
2.  **模型监控抓重点**：
    *   **核心业务指标**：推理延迟 (P99, P95, Avg)、QPS、错误率。
    *   **模型漂移指标**：预测结果分布漂移 (PSI, KL 散度)、关键特征分布漂移。
    *   **资源指标**：GPU/CPU 利用率、显存占用。
    *   利用 NovaBrain 的可定制 Dashboard，只看你最关心的指标。
3.  **日志挖掘技巧**：
    *   学会使用 `kubectl logs` 的 `--since`, `--tail`, `-f` 等参数。
    *   结合 `grep`, `awk` 等 Linux 命令进行过滤和分析。
    *   如果平台集成了 ELK 或 Loki，学习使用其查询语法。
    *   在你的应用程序代码里打**有意义的**日志！

## Part 4: 隐藏技巧与彩蛋

*   **命令行工具 (CLI)**：NovaBrain 通常提供 CLI 工具，对于自动化运维和批量操作，比 Web UI 更高效。
*   **API 探索**：官方 API 文档可能不全，试试用浏览器的开发者工具抓包，看看 Web UI 调用了哪些未公开的 API，可能有惊喜。
*   **社区的力量**：官方论坛、Slack 群、GitHub Issue 是宝藏，里面有大佬、有踩坑经验、有最新的 Workaround。

**免责声明**：本指南基于社区用户经验整理，非官方出品，不保证完全准确，仅供参考。欢迎补充和指正！ 