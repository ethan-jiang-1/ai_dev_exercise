# BMI 计算功能 - 设计方案

## 1. 函数接口设计

```python
def bmi_calculate(height_m: float, weight_kg: float) -> float:
    """
    计算 BMI (身体质量指数)
    
    参数:
        height_m (float): 身高，单位为米
        weight_kg (float): 体重，单位为千克
        
    返回:
        float: BMI 值，保留两位小数
        
    异常:
        TypeError: 当输入参数不是数字类型时
        ValueError: 当输入参数小于或等于 0 时
    """
```

## 2. 实现步骤详细设计

### 2.1 输入验证

1. **类型检查**:
   ```python
   if not isinstance(height_m, (int, float)) or not isinstance(weight_kg, (int, float)):
       raise TypeError("身高和体重必须是数字类型")
   ```

2. **值范围检查**:
   ```python
   if height_m <= 0:
       raise ValueError("身高必须大于0")
   if weight_kg <= 0:
       raise ValueError("体重必须大于0")
   ```

### 2.2 BMI 计算

1. **核心计算**:
   ```python
   bmi = weight_kg / (height_m ** 2)
   ```

2. **结果精度处理**:
   ```python
   return round(bmi, 2)
   ```

## 3. 测试用例设计

### 3.1 正常情况测试
- 测试正常输入值（如：身高1.75米，体重70千克）
- 测试整数输入（如：身高2米，体重80千克）
- 测试小数输入（如：身高1.68米，体重58.5千克）

### 3.2 边界情况测试
- 测试极小的合法值（如：身高0.1米，体重0.1千克）
- 测试较大的合法值（如：身高3米，体重300千克）

### 3.3 异常情况测试
- 类型错误测试：
  - 传入字符串
  - 传入 None
  - 传入布尔值
- 值错误测试：
  - 零值（身高0或体重0）
  - 负值（身高-1或体重-1）

## 4. 错误信息设计

为确保错误信息清晰明确，我们将使用以下格式：

1. **类型错误**:
   - "身高必须是数字类型"
   - "体重必须是数字类型"

2. **值错误**:
   - "身高必须大于0"
   - "体重必须大于0"

## 5. 性能考虑

- 函数执行效率高，无需特殊的性能优化
- 内存占用minimal，只需要几个基本变量
- 无需缓存或其他复杂机制

## 6. 代码风格

- 遵循 PEP 8 规范
- 使用类型提示增强代码可读性
- 添加详细的文档字符串
- 使用有意义的变量名

## 7. 可能的扩展点

虽然当前采用简单实现，但预留了以下扩展可能：

1. 未来可能支持不同单位转换
2. 可能需要支持更多精度控制
3. 可能需要添加更多的输入验证规则

这些扩展点目前不实现，但在代码组织时会考虑到这些可能性。 