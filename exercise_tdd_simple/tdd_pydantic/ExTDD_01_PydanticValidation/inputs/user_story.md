# 用户故事：API数据验证框架

## 背景

某电商平台需要实现一个健壮的用户注册API。该API需要严格验证用户提交的信息，确保数据完整性和安全性。团队决定使用Pydantic构建一个灵活的数据验证框架，以简化API的开发并提高代码质量。

## 用户故事

作为API开发者，我需要：

1. 能够定义用户注册信息的数据模型，包括：
   - 基本信息（用户名、密码、邮箱、手机号）
   - 详细信息（姓名、年龄、地址）
   - 账户设置（通知偏好、隐私设置）

2. 对提交的数据应用以下业务规则：
   - 用户名长度5-20个字符，只能包含字母、数字和下划线
   - 密码长度8-30个字符，必须包含大小写字母、数字和特殊字符
   - 邮箱必须符合标准格式并验证域名有效性
   - 手机号必须符合国内手机号格式（支持多国格式）
   - 年龄必须在18-120之间
   - 地址必须包含省/市/区/详细地址结构

3. 当数据验证失败时，系统应返回：
   - 结构化的错误信息
   - 用户友好的错误提示
   - 详细的错误位置

4. 验证框架需要支持：
   - 字段条件验证（如"当选择接收短信通知时，手机号必填"）
   - 跨字段验证（如"备用邮箱不能与主邮箱相同"）
   - 异步验证（如"检查邮箱是否已被注册"）

## 技术要求

- 使用Pydantic v2.0+构建模型
- 提供简洁的API接口
- 支持国际化错误消息
- 良好的性能（大量请求下的响应时间） 