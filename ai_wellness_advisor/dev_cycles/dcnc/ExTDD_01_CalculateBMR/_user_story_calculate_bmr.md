# User Story: Calculate BMR (基础代谢率计算)

## 特性标识
- **模块名**: dcnc
- **特性名**: calculate_bmr
- **TDD周期**: ExTDD_01_CalculateBMR

## 用户故事描述

> **作为** 一名关心健康的用户  
> **我希望** 输入我的性别、年龄、身高和体重  
> **以便** 知道我每天最少需要消耗多少能量来维持生命  
> **当** 输入信息不完整或无效时  
> **我希望** 能得到清晰的提示  

## 详细需求

### 功能需求
1. **输入参数**：
   - 性别（男性/女性）
   - 年龄（岁）
   - 身高（厘米）
   - 体重（千克）

2. **计算公式**：
   - 使用Harris-Benedict公式计算BMR
   - 男性：BMR = 88.362 + (13.397 × 体重kg) + (4.799 × 身高cm) - (5.677 × 年龄)
   - 女性：BMR = 447.593 + (9.247 × 体重kg) + (3.098 × 身高cm) - (4.330 × 年龄)

3. **输出结果**：
   - 返回每日基础代谢率（单位：卡路里/天）
   - 结果保留到小数点后1位

### 验证需求
1. **输入验证**：
   - 性别必须是"male"或"female"
   - 年龄必须是正整数，范围1-120岁
   - 身高必须是正数，范围50-300厘米
   - 体重必须是正数，范围10-500千克

2. **异常处理**：
   - 输入参数缺失时抛出ValueError
   - 输入参数类型错误时抛出TypeError
   - 输入参数超出合理范围时抛出ValueError

## 验收标准

### 场景1：正常计算男性BMR
- **给定** 性别="male", 年龄=30, 身高=175, 体重=70
- **当** 调用calculate_bmr函数
- **那么** 返回BMR约为1680.0卡路里/天

### 场景2：正常计算女性BMR
- **给定** 性别="female", 年龄=25, 身高=160, 体重=55
- **当** 调用calculate_bmr函数
- **那么** 返回BMR约为1350.0卡路里/天

### 场景3：输入验证失败
- **给定** 无效的输入参数（如负数年龄、无效性别等）
- **当** 调用calculate_bmr函数
- **那么** 抛出相应的异常并提供清晰的错误信息

## 技术约束

1. **编程语言**: Python 3.8+
2. **函数签名**: `calculate_bmr(gender: str, age: int, height: float, weight: float) -> float`
3. **返回值**: 浮点数，保留1位小数
4. **异常处理**: 使用标准Python异常类型
5. **代码风格**: 遵循PEP 8规范

## 相关文档

- [Harris-Benedict公式说明](https://en.wikipedia.org/wiki/Harris%E2%80%93Benedict_equation)
- [TDD开发流程](../../../tdd_rules/tdd_ai_thinking.md)