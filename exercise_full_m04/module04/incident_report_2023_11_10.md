# 部署事故报告：2023-11-10 模型服务不可用

## 事故概述

**事故时间**: 2023年11月10日 14:30-17:45 CST
**影响范围**: 所有使用模型推理服务的功能不可用，约影响85%的用户
**严重程度**: P1（关键）
**状态**: 已解决

## 事故详情

在部署 NovaBrain 2.9.5 版本时，模型推理服务在新版本启动后不可用，导致依赖该服务的所有功能均无法正常工作。

## 影响

- 所有依赖AI模型的分析功能不可用
- 低代码引擎中的智能组件无法正常工作
- 用户无法创建或执行任何基于模型的流程

## 根本原因

1. 主要原因：模型服务配置文件中的GPU内存配置参数错误，导致服务启动后立即崩溃
2. 次要原因：部署脚本未正确验证服务健康状态就完成了流量切换

## 解决方案

### 短期修复
- 回滚到上一个稳定版本 2.9.4
- 修复配置文件并在测试环境验证
- 重新部署 2.9.5 版本并确认所有服务健康

### 长期修复
- 改进部署脚本，确保健康检查更全面
- 为模型服务添加配置验证步骤
- 完善监控告警，使配置错误能被及时发现

## 预防措施

1. 完善部署前检查清单，增加配置审查环节
2. 改进CI/CD流程，在部署前自动验证关键配置
3. 实施更严格的变更管理流程，配置变更需要双人审核
4. 开发针对模型服务的更全面监控和告警措施

## 事后总结

本次事故暴露了我们在配置管理和部署流程方面的不足。团队需要加强对关键服务配置的管理，并提高部署过程中的验证质量。
