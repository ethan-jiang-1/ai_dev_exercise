# 医疗影像API练习：技术栈与约束总览

本文档提供医疗影像API练习系列的技术要求、约束条件和评估标准，适用于所有ExMS系列练习。

## 技术栈要求

### 编程语言与主要库
- **Python 3.8+**: 主要开发语言
- **pydicom**: 用于DICOM文件处理
- **numpy**: 用于数值计算和数组操作 
- **PIL/Pillow**: 用于图像处理
- **matplotlib**: 用于图像可视化（可选）
- **pytest**: 用于单元测试（可选）

### 数据格式与标准
- **DICOM**: 医疗成像主要数据格式
- **JSON**: 用于API通信和配置
- **PNG/JPEG**: 常见图像输出格式

### 开发工具
- **Cursor代码编辑器**: 用于编写和管理代码
- **GitHub**: 用于版本控制（如适用）
- **Markdown**: 用于所有文档编写

## 通用约束条件

### 设计原则
1. **模块化**: 每个功能应当设计为独立模块，便于测试和集成
2. **简单性**: 优先采用简单直接的解决方案，避免过度设计
3. **可测试性**: 代码应当易于编写测试用例
4. **文档完整**: 提供清晰的代码注释和文档
5. **安全与隐私**: 考虑医疗数据的敏感性，遵循相关规范

### 开发限制
1. **代码量控制**: 
   - 微功能练习: 单文件不超过200行代码
   - 宏观任务: 输出文档不超过500行

2. **依赖限制**:
   - 仅使用指定的核心库
   - 避免使用过于专业或冷门的第三方库
   - 对于特殊需求，应先在实现分析中讨论

3. **时间限制**:
   - 微功能练习总时间在1小时内可完成
   - 每个宏观任务在45分钟内可完成

4. **代码风格**:
   - 遵循PEP 8风格指南
   - 使用有意义的变量和函数名
   - 保持一致的缩进和格式

## 输出文件格式与模板

### 微功能练习输出
每个微功能练习的输出应包含以下文件:

1. **实现分析文档** (`s1_implementation_analysis.md`):
```markdown
# [功能名称] 实现分析

## 需求理解
[简要总结对需求的理解]

## 技术选择
[说明选择的技术方案和原因]

## 实现思路
[描述主要算法和实现步骤]

## 潜在挑战
[列出实现过程中可能遇到的挑战]

## 测试策略
[描述如何测试该功能]
```

2. **行动计划** (`s2_action_plan.md`):
```markdown
# [功能名称] 行动计划

## 任务分解
1. [任务1描述]
2. [任务2描述]
...

## 代码框架
```python
# 代码框架示例
```

## 测试用例概述
- 测试场景1: [描述]
- 测试场景2: [描述]
...

## 完成标准
[列出功能完成的标准]
```

3. **单元测试文件** (`test_功能名.py`):
```python
import unittest
# 其他必要的导入

class Test功能名(unittest.TestCase):
    def setUp(self):
        # 测试前准备
        pass
        
    def test_场景1(self):
        # 测试代码
        self.assertEqual(expected, actual)
    
    # 更多测试方法
    
if __name__ == "__main__":
    unittest.main()
```

4. **功能实现文件** (`功能名.py`):
```python
# 必要的导入

def main_function(param1, param2):
    """
    函数说明
    
    Args:
        param1: 参数1说明
        param2: 参数2说明
        
    Returns:
        返回值说明
        
    Raises:
        可能抛出的异常
    """
    # 实现代码
    
# 其他辅助函数
```

### 宏观任务输出
宏观任务的输出通常是单个Markdown文档，包含特定于任务的内容。每个任务的约束文件会详细说明输出格式要求。

## 评估标准

所有练习的评估将基于以下标准:

### 功能性评估
- **正确性**: 代码实现是否满足需求规格
- **完整性**: 是否处理了所有边缘情况和错误情况
- **效率**: 算法和数据结构选择是否合理

### 代码质量评估
- **可读性**: 代码是否易于理解
- **可维护性**: 代码结构是否清晰，是否便于维护
- **可测试性**: 代码是否易于测试

### 文档质量评估
- **完整性**: 文档是否涵盖了所有必要信息
- **清晰度**: 文档表达是否清晰易懂
- **实用性**: 文档是否对实际开发有帮助

### AI+Markdown使用评估
- **工具使用效率**: 是否有效利用AI工具
- **提示工程质量**: 提示设计是否清晰有效
- **反馈利用**: 是否有效利用AI反馈进行迭代改进

## 有效的软件工程思维与AI工具的合理使用

本故事设计的分步骤过程（实现分析 -> 行动计划 -> 单元测试设计 -> 测试驱动开发 -> 文档完善）不仅是一种学习方法，更是反映了高质量软件工程的基本原则。在使用AI工具时，必须牢记这一点：

### 为什么分步骤过程是软件工程的基础

1. **思维建构是根本**：软件工程的本质不是代码编写，而是思路构建、问题分解和解决方案规划。代码仅是这些思考过程的具体呈现。

2. **一步到位的解决方案存在严重问题**：
   - 缺乏深度思考和系统性规划
   - 通常无法处理复杂边界情况
   - 极难维护和重构
   - 不利于知识沉淀和团队协作
   - 难以适应需求变化

3. **质量工程必须建立在分解的基础上**：
   - 实现分析：明确理解问题，识别挑战和限制
   - 行动计划：任务分解、架构设计和接口定义
   - 测试设计：定义成功标准，明确边界条件
   - 实现：在已有框架下填充具体逻辑
   - 文档：确保知识传承和维护可能性

### AI工具的正确定位

AI工具应被视为辅助思考的工具，而非替代思考的快捷方式：

1. **AI辅助而非主导**：AI应该辅助您完成每个步骤，而不是跳过步骤直接生成最终产品。

2. **保持控制与主导地位**：您的思路、规划和决策才是核心，AI只是帮助您表达和实现这些想法。

3. **避免"暗箱解决方案"**：不要接受自己不完全理解的解决方案，无论它看起来多么优雅。

### 实践指南

在使用AI工具时，请遵循以下原则：

1. **明确区分每个步骤**：为每个步骤创建单独的输出文件，确保思考过程清晰可见。

2. **亲自主导规划阶段**：实现分析和行动计划应该主要由您自己主导，AI只作为辅助。
   
3. **不跳过任何步骤**：即使某个步骤看似简单，也不要跳过。每个步骤都有其价值。

4. **重视反思和迭代**：在步骤之间进行反思，允许对前期决策进行调整。

5. **指导AI而非被AI引导**：用明确的提示词指导AI，例如：
   ```
   我需要完成DICOM元数据读取功能的实现分析。请协助我思考这个问题的核心挑战和可能的解决方案。我需要分析文件格式特点、可能的异常情况和性能考虑。请不要直接提供代码实现。
   ```

6. **拒绝过早优化和复杂解决方案**：在理解问题之前不要急于采纳复杂的解决方案。

记住，工程质量源于思维质量。分步骤不仅是一种练习方法，更是创造可维护、可扩展的高质量软件的必要途径。 