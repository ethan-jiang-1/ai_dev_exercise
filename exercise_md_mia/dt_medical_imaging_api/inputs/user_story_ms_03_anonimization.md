# 用户故事：DICOM 文件匿名化

## 用户故事

作为医学研究人员，我需要一个工具来匿名化DICOM医疗影像文件，以便在研究和教学中使用这些数据的同时保护患者隐私和符合数据保护法规。

## 验收标准

1. 能够移除或修改以下个人标识信息：
   - 患者姓名 (PatientName)
   - 患者ID (PatientID)
   - 出生日期 (PatientBirthDate)
   - 医院名称 (InstitutionName)
   - 医生姓名 (ReferringPhysicianName, PerformingPhysicianName)
   - 患者住址 (PatientAddress)

2. 为必要的标识字段生成一致的匿名替代值：
   - 对同一患者的所有影像使用相同的匿名ID
   - 保持影像之间的关联性（如研究UID、系列UID）

3. 保留医学相关的非个人信息：
   - 模态 (Modality)
   - 身体部位 (BodyPartExamined)
   - 研究描述 (StudyDescription)
   - 图像采集参数

4. 创建匿名化后的新DICOM文件，不修改原始文件

5. 当文件不存在或无法访问时提供适当的错误处理

## 技术约束

1. 使用Python 3.10+
2. 使用pydicom库处理DICOM文件
3. 实现为单个函数，返回新文件路径
4. 不改变像素数据内容
5. 保持DICOM格式的有效性

## 注意事项

- 匿名化是医学研究中的关键步骤，但本实现仅为基础版本
- 不同机构可能有不同的匿名化要求，此实现应专注于基本隐私保护
- 出于简化目的，不要求实现影像像素数据的脱敏（如移除烧录在图像上的文字）
- 应记录匿名化过程，以便于日后需要时可追踪原始数据 