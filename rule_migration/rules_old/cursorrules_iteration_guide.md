# Python 迭代开发指南

## 渐进式修改原则

### 步步为营
- 每次只修改一个关键点
- 修改后必须验证效果
- 保持其他部分的稳定性

### 修改策略
- 从抽象到具体
- 从通用到特殊
- 优先使用补充而不是替换

### 验证流程
- 每次修改后运行测试
- 对比修改前后的行为变化
- 确认没有引入意外的副作用

### 最佳实践
- 在已有结构中找到合适的位置添加内容
- 保持原有的抽象层次
- 新增内容要与上下文保持一致的表达方式

### 常见错误
- 一次性修改过多内容
- 改变现有的抽象层次
- 没有验证修改的效果
- 过度重写现有功能而不是渐进式改进
- 忽视项目中的依赖关系

### 项目代码修改原则
- 保持核心接口稳定
  * 类的公共方法签名
  * 数据结构的基本形态
  * 配置和环境要求
- 增量式更新
  * 一次只关注一个功能点
  * 保持其他部分的行为不变
  * 确保向后兼容
- 依赖关系处理
  * 评估修改对其他模块的影响
  * 同步更新相关的测试用例
  * 维护文档的一致性
- 修改验证
  * 运行已有的测试套件
  * 检查日志和调试输出
  * 验证与其他模块的交互

### 任务分解策略
- 将复杂任务分解为子任务
- 每个子任务有明确的输入输出
- 子任务之间保持松耦合

### 数据流转规范
- 定义清晰的数据结构
- 统一数据传递格式
- 保持数据流向清晰

## 代码修改流程

### 修改前准备
- 理解现有代码结构
- 确定修改范围
- 准备测试用例
- 记录当前状态

### 修改过程
- 小步修改，频繁提交
- 保持代码可运行
- 同步更新测试
- 及时处理反馈

### 修改后检查
- 运行全套测试
- 检查代码风格
- 更新相关文档
- 记录修改原因

## 重构指南

### 重构时机
- 代码重复度高
- 函数过于复杂
- 类职责不清
- 依赖关系混乱

### 重构策略
- 提取共同代码
- 简化复杂逻辑
- 明确类的职责
- 优化依赖结构

### 重构验证
- 保持功能不变
- 确保测试通过
- 验证性能影响
- 检查代码质量

## 性能优化

### 优化原则
- 先分析后优化
- 重点优化瓶颈
- 保持代码可读
- 权衡利弊得失

### 优化方法
- 使用性能分析工具
- 优化算法和数据结构
- 合理使用缓存
- 减少不必要的计算

### 优化验证
- 测量性能提升
- 确保功能正确
- 评估维护成本
- 记录优化过程

## AI 辅助开发实践

### 有效沟通
- 提供完整的上下文信息
- 明确表达修改意图
- 分步骤提出需求
- 及时反馈结果

### 代码生成
- 先让AI理解现有代码
- 要求生成可测试的代码
- 确保包含必要的导入
- 验证生成代码的正确性

### 调试技巧
- 提供完整的错误信息
- 使用工具链定位问题
- 让AI分析根本原因
- 验证修复方案

### 工具链使用
- 善用代码搜索功能
- 结合静态分析工具
- 使用自动补全和提示
- 保持工具链更新

### LLM调用规范
- 统一的提示词模板
- 结构化的输出格式
- 重试机制和错误处理

### 质量控制
- 要求AI遵循项目规范
- 审查生成的代码
- 确保类型注解完整
- 保持文档同步更新 