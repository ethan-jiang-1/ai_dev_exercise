# s4: å®æ–½æŒ‡å— - ç¼–å†™ MDC è§„åˆ™å†…å®¹ (Implementation Guide - Writing MDC Rule Content)

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜äº†å¦‚ä½•ä¸º MDC è§„åˆ™æ–‡ä»¶ä¸­çš„å››ä¸ªå¿…éœ€éƒ¨åˆ†ç¼–å†™æœ‰æ•ˆå†…å®¹ï¼Œéµå¾ª `s2_Analysis.md` ä¸­å®šä¹‰çš„ç»“æ„ã€‚

## MDC å†…å®¹ç»“æ„æŒ‡å— (MDC Content Structure Guide)

æ¯ä¸ª MDC æ–‡ä»¶å¿…é¡»åŒ…å«ä»¥ä¸‹å››ä¸ª H2 éƒ¨åˆ†ï¼š

### 1. `## æ ¸å¿ƒåŸåˆ™å®£è¨€ (Core Principles Declaration)`

*   **ç›®çš„ (Purpose):** æ¸…æ™°é˜è¿°è§„åˆ™çš„åŸºæœ¬åŸç†ã€‚
*   **å†…å®¹ (Content):**
    *   **âš¡ï¸ æ ¸å¿ƒé—®é¢˜ (Core Problem):** ç®€æ´åœ°è¯´æ˜æ­¤è§„åˆ™è¦è§£å†³çš„é—®é¢˜ã€‚
    *   **ğŸ’¥ å¿½ç•¥çš„åæœ (Consequences of Ignoring):** åˆ—å‡ºä¸éµå®ˆè§„åˆ™çš„å…·ä½“è´Ÿé¢åæœã€‚
    *   **ğŸ’ éµå®ˆçš„å¥½å¤„ (Benefits of Following):** åˆ—å‡ºéµå®ˆè§„åˆ™çš„å®é™…ç§¯ææˆæœã€‚
    *   **âš–ï¸ å¿…è¦çš„æƒè¡¡ (Necessary Trade-offs):** æ‰¿è®¤æ‰€æ¶‰åŠçš„ä»»ä½•å¦¥åæˆ–å¹³è¡¡ï¼ˆä¾‹å¦‚ï¼Œæ€§èƒ½ vs. å¯è¯»æ€§ï¼‰ã€‚

### 2. `## å…³é”®å®è·µæŒ‡å— (Key Practices Guide)`

*   **ç›®çš„ (Purpose):** æä¾›å…³äº *å¦‚ä½•* å®æ–½è§„åˆ™çš„å¯æ“ä½œã€å®ç”¨çš„æŒ‡å¯¼ã€‚
*   **å†…å®¹ (Content) (é’ˆå¯¹æ¯ä¸ªä¸åŒçš„å®è·µ):**
    *   ä½¿ç”¨ H4 æ ‡é¢˜æ ‡è¯†æ¯ä¸ªå®è·µ (`#### å®è·µåç§° Practice Name`)ã€‚
    *   **ä¸ºä½•éœ€è¦è¿™æ ·åš (Why this is necessary):** è§£é‡Šå®è·µèƒŒåçš„åŸºæœ¬åŸç†ã€‚
    *   **âŒ å¸¸è§é”™è¯¯ / åæ¨¡å¼ (Common Mistakes / Anti-patterns):** å±•ç¤ºæ¸…æ™°çš„ *é”™è¯¯* ä»£ç ç¤ºä¾‹ã€‚
        ```python
        # é”™è¯¯ç¤ºä¾‹ä»£ç  (Bad example code)
        ```
    *   **âœ… æ­£ç¡®æ–¹æ³• (Correct Approach):** å±•ç¤ºæ¸…æ™°çš„ *æ­£ç¡®* ä»£ç ç¤ºä¾‹ã€‚
        ```python
        # æ­£ç¡®ç¤ºä¾‹ä»£ç  (Good example code)
        ```
    *   **(å¯é€‰ Optional) ğŸ”„ é‡æ„è·¯å¾„ (Refactoring Path):** æä¾›å°†åä»£ç è½¬æ¢ä¸ºå¥½ä»£ç çš„åˆ†æ­¥è¯´æ˜ã€‚
    *   **(å¯é€‰ Optional) é™·é˜±/ç¼ºé™· (Traps/Pitfalls):** æåŠå¸¸è§çš„è¯¯è§£æˆ–è¾¹ç¼˜æƒ…å†µã€‚

### 3. `## å†³ç­–æŒ‡å¯¼ (Decision Guidance)`

*   **ç›®çš„ (Purpose):** å¸®åŠ©å¼€å‘è€…åœ¨è§„åˆ™æ¶‰åŠé€‰æ‹©æˆ–å¤æ‚æ€§æ—¶è¿›è¡Œå¯¼èˆªã€‚
*   **å†…å®¹ (Content) (ä½¿ç”¨ç›¸å…³æ ¼å¼):**
    *   **ğŸŒ² å†³ç­–æ ‘ (Decision Tree):** ä½¿ç”¨åµŒå¥—åˆ—è¡¨æˆ–å›¾è¡¨ï¼Œæ ¹æ®ç‰¹å®šæ ‡å‡†æŒ‡å¯¼é€‰æ‹©ã€‚
        ```
        1. æ¡ä»¶ A? (Condition A?)
           - æ˜¯ (Yes) -> æ–¹æ³• X (Approach X)
           - å¦ (No) -> æ£€æŸ¥æ¡ä»¶ B (Check Condition B)
        2. æ¡ä»¶ B? (Condition B?)
           ...
        ```
    *   **ğŸ“Š å¯¹æ¯”è¡¨ (Comparison Table):** ä½¿ç”¨ Markdown è¡¨æ ¼ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡ã€ä¼˜ç¼ºç‚¹ç­‰æ¯”è¾ƒä¸åŒçš„æ–¹æ³•ã€‚
        ```markdown
        | æ–¹æ³• (Approach) | ä½¿ç”¨åœºæ™¯ (When to Use) | ä¼˜ç‚¹ (Pros) | ç¼ºç‚¹ (Cons) | æ³¨æ„äº‹é¡¹ (Notes) |
        |---------------|--------------------|-----------|-----------|--------------|
        | é€‰é¡¹ 1 (Option 1) | åœºæ™¯ A (Scenario A)  | æ€§èƒ½å¥½ (Good Perf) | å¤æ‚ (Complex) | éœ€è°¨æ… (Be careful) |
        | é€‰é¡¹ 2 (Option 2) | åœºæ™¯ B (Scenario B)  | ç®€å• (Simple) | æ€§èƒ½ç¨å·® (Less Perf) | æ›´å®¹æ˜“ (Easier) |
        ```
    *   **æ˜ç¡®çš„æ ‡å‡† (Clear Criteria):** æä¾›æ˜ç¡®çš„åˆ¤æ–­æ ‡å‡†ã€‚

### 4. `## æ¸…å• (Checklist)`

*   **ç›®çš„ (Purpose):** æä¾›å…·ä½“ã€å¯éªŒè¯çš„æ­¥éª¤ï¼Œä»¥ç¡®ä¿è§„åˆ™è¢«æ­£ç¡®åº”ç”¨ã€‚
*   **å†…å®¹ (Content):**
    *   é€»è¾‘åœ°ç»„ç»‡æ¸…å•é¡¹ï¼ˆä¾‹å¦‚ï¼ŒæŒ‰å¼€å‘é˜¶æ®µï¼šç¼–ç é˜¶æ®µ Coding Phase, é‡æ„é˜¶æ®µ Refactoring Phase, ä»£ç å®¡æŸ¥é˜¶æ®µ Code Review Phaseï¼‰ã€‚
    *   ä½¿ç”¨ H4 æ ‡é¢˜æ ‡è¯†é˜¶æ®µ (`#### ç¼–ç é˜¶æ®µ Coding Phase`)ã€‚
    *   æ¯ä¸ªé¡¹ç›®åº”ä¸ºä¸€ä¸ªå¤é€‰æ¡† (`- [ ] æ¸…å•é¡¹åç§° Check Item Name`)ã€‚
    *   ä¸ºæ¯ä¸ªé¡¹ç›®æŒ‡å®šï¼š
        *   `åˆ¤æ–­æ ‡å‡† (Judgment Standard):` å¦‚ä½•ç¡®å®šé¡¹ç›®æ˜¯å¦é€šè¿‡/å¤±è´¥ã€‚
        *   `å¿«é€Ÿä¿®å¤ (Quick Fix):` å¦‚æœå¤±è´¥ï¼Œå¦‚ä½•çº æ­£é—®é¢˜ã€‚
    *   åœ¨é€‚ç”¨æ—¶æŒ‡å‡ºè‡ªåŠ¨åŒ–æ£€æŸ¥çš„å¯èƒ½æ€§ã€‚

## æ¨¡æ¿ç¤ºä¾‹ (Template Example)

```markdown
# è§„åˆ™æ ‡é¢˜ (Rule Title)

---
# (æ­¤å¤„ä¸º YAML å…ƒæ•°æ® YAML Frontmatter here)
---

## æ ¸å¿ƒåŸåˆ™å®£è¨€ (Core Principles Declaration)

âš¡ï¸ **æ ¸å¿ƒé—®é¢˜ (Core Problem):** [ç®€æ´çš„é—®é¢˜é™ˆè¿°]

ğŸ’¥ **å¿½ç•¥çš„åæœ (Consequences of Ignoring):**
- åæœ 1
- åæœ 2

ğŸ’ **éµå®ˆçš„å¥½å¤„ (Benefits of Following):**
- å¥½å¤„ 1
- å¥½å¤„ 2

âš–ï¸ **å¿…è¦çš„æƒè¡¡ (Necessary Trade-offs):**
- æƒè¡¡ 1: X vs Y
- æƒè¡¡ 2: A vs B

## å…³é”®å®è·µæŒ‡å— (Key Practices Guide)

#### å®è·µ 1: [å®è·µåç§° (Practice Name)]

**ä¸ºä½•éœ€è¦ (Why):** [åŸºæœ¬åŸç†]

âŒ **å¸¸è§é”™è¯¯ (Common Mistake):**
```python
# é”™è¯¯ä»£ç  (Bad code)
```

âœ… **æ­£ç¡®æ–¹æ³• (Correct Approach):**
```python
# æ­£ç¡®ä»£ç  (Good code)
```

ğŸ”„ **é‡æ„è·¯å¾„ (Refactoring Path):**
1. æ­¥éª¤ 1 (Step 1)
2. æ­¥éª¤ 2 (Step 2)

#### å®è·µ 2: [å®è·µåç§° (Practice Name)]
...

## å†³ç­–æŒ‡å¯¼ (Decision Guidance)

ğŸŒ² **å†³ç­–æ ‘ (Decision Tree):**
1. æ¡ä»¶ X æ˜¯å¦ä¸ºçœŸ? (Is condition X true?)
   - æ˜¯ (Yes): ä½¿ç”¨æ–¹æ³• A (Use Method A)
   - å¦ (No): ç»§ç»­... (Continue...)

*æˆ–è€… (or)*

ğŸ“Š **æ–¹æ³•æ¯”è¾ƒ (Approach Comparison):**
| æ–¹æ³• (Approach) | èƒŒæ™¯ (Context) | ä¼˜ç‚¹ (Pro) | ç¼ºç‚¹ (Con) |
|---|---|---|---|
| ... | ... | ... | ... |

## æ¸…å• (Checklist)

#### ç¼–ç é˜¶æ®µ (Coding Phase)
- [ ] æ£€æŸ¥é¡¹ A (Check Item A)
      *åˆ¤æ–­æ ‡å‡† (Judgment Standard):* [å¦‚ä½•åˆ¤æ–­]
      *å¿«é€Ÿä¿®å¤ (Quick Fix):* [å¦‚ä½•ä¿®å¤]

#### ä»£ç å®¡æŸ¥é˜¶æ®µ (Code Review Phase)
- [ ] æ£€æŸ¥é¡¹ B (Check Item B)
      *åˆ¤æ–­æ ‡å‡† (Judgment Standard):* [å¦‚ä½•åˆ¤æ–­]
      *å¿«é€Ÿä¿®å¤ (Quick Fix):* [å¦‚ä½•ä¿®å¤]
```

*æ¥æº: åŸºäº mdc_design.md (Source: Derived from mdc_design.md)* 