# 智能优惠券推荐练习约束指南

本文档为电商推荐系统故事中的ExMS_04系列练习提供具体约束和指导，以确保练习保持简单、直接，并适合短时间演示。

## 总体约束

所有ExMS_04系列练习应遵循以下总体约束：

1. **简单优先**：实现应该是最直接、最简单的解决方案，不要过度设计或优化
2. **时间限制**：每个练习步骤应在10-15分钟内完成
3. **代码量控制**：最终实现的Python代码应控制在150行以内
4. **文档简洁**：文档和注释应简明扼要，直击重点
5. **单一文件**：整个实现应集中在单个Python文件中，避免复杂的目录结构

## 各步骤具体约束

### ExMS_04_1: 从用户故事到实现思考

**约束**：
- 分析篇幅限制在1-2页内（约500字）
- 只考虑一种最简单的实现方案（基于字典和函数的处理逻辑）
- 技术挑战最多列出3-4点，并保持简单
- 推荐方案部分不超过15行描述
- 不需要详细的架构图或组件设计

**输出**：`s1_implementation_analysis.md`包含简短的需求分析和推荐实现方案

### ExMS_04_2: 从实现思考到行动计划

**约束**：
- 任务列表不超过4-6项，总工时不超过1-2天
- 代码框架中只包含3-4个核心函数
- 不使用类和复杂设计模式，只使用简单函数
- 数据结构应限于基本字典和列表
- 整个代码框架不超过60行

**输出**：
- `s2_action_plan.md`：简短的行动计划（<30行）
- `coupon_recommendation.py`：包含核心函数框架的Python文件

### ExMS_04_3: 单元测试设计与审查

**约束**：
- 设计4-6个测试用例，覆盖基本功能和边界情况
- 测试数据应简单明了，不需要复杂场景
- 使用标准库unittest，不引入额外依赖
- 测试代码不超过70行
- 重点测试核心推荐逻辑，不必测试所有边缘情况

**测试数据结构指南**：
```python
# 购物车数据结构示例
cart_items = [
    {"id": "P1", "name": "笔记本电脑", "price": 5999.0, "category": "electronics"},
    {"id": "P2", "name": "无线鼠标", "price": 99.0, "category": "accessories"}
]

# 优惠券数据结构示例
coupons = {
    "C1": {
        "id": "C1", 
        "name": "电子产品9折", 
        "type": "category_discount",  # 品类折扣
        "category": "electronics", 
        "discount_value": 0.9,  # 折扣率
        "min_purchase": 1000.0  # 最低消费
    },
    "C2": {
        "id": "C2", 
        "name": "满500减50", 
        "type": "amount_off",  # 满减券
        "min_purchase": 500.0, 
        "discount_value": 50.0  # 减免金额
    },
    "C3": {
        "id": "C3", 
        "name": "全场95折", 
        "type": "overall_discount",  # 全场折扣
        "discount_value": 0.95,  # 折扣率
        "min_purchase": 0.0  # 无最低消费
    }
}
```

**输出**：`test_coupon_recommendation.py`包含简单的单元测试

### ExMS_04_4: 测试驱动开发实现

**约束**：
- 实现应完全基于测试用例
- 核心算法应保持直接明了，不超过30行
- 不需要考虑性能优化，只关注正确性
- 错误处理应最小化，只处理基本情况
- 完整实现不应超过100行代码

**输出**：`coupon_recommendation.py`包含完整实现的优惠券推荐功能

### ExMS_04_5: 函数文档完善

**约束**：
- 文档字符串应简洁，每个函数不超过6行
- API文档整体不超过1.5页
- 只提供2-3个简单使用示例
- 不需要详细的性能和扩展性讨论
- 重点在清晰而非全面

**输出**：
- 更新后的`coupon_recommendation.py`（包含完善的文档字符串）
- `s5_api_documentation.md`（简短的API使用指南）

## 评估标准

评估练习成果时，应关注：
1. **简洁性**：解决方案是否足够简单明了
2. **完整性**：是否实现了核心功能
3. **可读性**：代码和文档是否易于理解
4. **正确性**：解决方案是否正确解决了问题

不应过分关注：
1. 性能优化
2. 扩展性设计
3. 架构复杂度
4. 全面的错误处理

## 最终目标

ExMS_04系列练习的最终目标是演示一个简单的"优惠券推荐"功能，从思考到计划、测试、实现、文档的完整流程，但保持每个步骤的简单性和直观性，便于短时间内理解和展示。相比ExMS_03系列，增加少量复杂度，提供更深入的挑战，但仍然确保每个练习可在规定时间内完成。 